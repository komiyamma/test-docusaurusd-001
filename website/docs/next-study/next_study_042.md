# ç¬¬42ç« ï¼šUIã‚’åˆ†è§£ã™ã‚‹ã‚³ãƒ„ï¼šã€Œè¦‹ãŸç›®ã€ã¨ã€Œãƒ­ã‚¸ãƒƒã‚¯ã€ã‚’åˆ†ã‘ã‚‹ğŸ§ 

ã“ã®ç« ã§ã¯ã€**ç”»é¢ï¼ˆUIï¼‰ã‚’ã‚­ãƒ¬ã‚¤ã«åˆ†ã‘ã¦ã€ã‚³ãƒ¼ãƒ‰ã‚’èª­ã¿ã‚„ã™ãï¼†ç›´ã—ã‚„ã™ãã™ã‚‹ã‚³ãƒ„**ã‚’èº«ã«ã¤ã‘ã‚‹ã‚ˆã€œï¼ğŸ¥°
ã€Œå‹•ãã‘ã©ã€ã©ã“è§¦ã£ã¦ã„ã„ã‹æ€–ã„â€¦ğŸ˜µâ€ğŸ’«ã€ã‚’å’æ¥­ã™ã‚‹å›ã§ã™ğŸ“âœ¨

---

## ä»Šæ—¥ã®ã‚´ãƒ¼ãƒ«ğŸ¯ğŸ’–

* **è¦‹ãŸç›®ã ã‘æ‹…å½“**ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œã‚Œã‚‹ã‚ˆã†ã«ãªã‚‹ğŸ¨
* **ãƒ­ã‚¸ãƒƒã‚¯ã ã‘æ‹…å½“**ï¼ˆçŠ¶æ…‹ãƒ»ã‚¤ãƒ™ãƒ³ãƒˆãƒ»APIå‘¼ã³å‡ºã—ï¼‰ã‚’åˆ¥ã«å‡ºã›ã‚‹ã‚ˆã†ã«ãªã‚‹ğŸ§ 
* ã€Œå¾Œã‹ã‚‰ä»•æ§˜å¤‰æ›´ã€ãŒæ¥ã¦ã‚‚ã€**æ³£ã‹ãšã«ç›´ã›ã‚‹**æ§‹æˆã«ã§ãã‚‹ğŸ˜­â¡ï¸ğŸ˜âœ¨

---

## ãªãœåˆ†ã‘ã‚‹ã®ï¼Ÿï¼ˆæ··ã–ã‚‹ã¨ãƒ„ãƒ©ã„ğŸ˜‡ï¼‰

UIã¨ãƒ­ã‚¸ãƒƒã‚¯ãŒ1ãƒ•ã‚¡ã‚¤ãƒ«ã«æ··ã–ã‚‹ã¨â€¦

* JSXãŒé•·ãã¦ã€**èª­ã‚€ã®ã«æ™‚é–“ã‹ã‹ã‚‹**ğŸŒ€
* ã¡ã‚‡ã£ã¨ä¿®æ­£ã—ãŸã‚‰ã€**åˆ¥ã®è¡¨ç¤ºãŒå£Šã‚Œã‚‹**ğŸ’¥
* ãƒ†ã‚¹ãƒˆã‚‚ã—ã¥ã‚‰ã„ï¼†å†åˆ©ç”¨ã—ã«ãã„ğŸ˜µâ€ğŸ’«

ã ã‹ã‚‰ã€ã–ã£ãã‚Šã“ã†åˆ†ã‘ã‚‹ã®ãŒå¼·ã„ã‚ˆğŸ’ªâœ¨

* **Presentationalï¼ˆè¦‹ãŸç›®ï¼‰**ï¼šè¡¨ç¤ºã™ã‚‹ã ã‘ğŸ€
* **Containerï¼ˆã¤ãªãå½¹ï¼‰**ï¼šãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ»çŠ¶æ…‹ãƒ»ã‚¤ãƒ™ãƒ³ãƒˆæ‹…å½“ğŸ§©
* **Hookï¼ˆãƒ­ã‚¸ãƒƒã‚¯éƒ¨å“ï¼‰**ï¼šçŠ¶æ…‹ç®¡ç†ã‚„å‡¦ç†ã‚’éƒ¨å“åŒ–ğŸª„

---

## å›³ã§ã‚¤ãƒ¡ãƒ¼ã‚¸ã™ã‚‹ã­ğŸ§¸ğŸ“Œï¼ˆMermaidï¼‰

![UIã¨ãƒ­ã‚¸ãƒƒã‚¯ã®åˆ†é›¢](./picture/next_study_042_ui_logic_split.png)

```mermaid
flowchart TD
  A["Container: ãƒ‡ãƒ¼ã‚¿/çŠ¶æ…‹/ã‚¤ãƒ™ãƒ³ãƒˆ"] --> B["Hook: ãƒ­ã‚¸ãƒƒã‚¯éƒ¨å“"]
  A --> C["UI: è¦‹ãŸç›®ã ã‘"]
  B --> A
  C -->|"propsã§å—ã‘å–ã‚‹"| A
```

ãƒã‚¤ãƒ³ãƒˆã¯ã“ã‚ŒğŸ‘‡âœ¨
**UIã¯ã€Œå—ã‘å–ã£ãŸãƒ‡ãƒ¼ã‚¿ã‚’æãã ã‘ã€**ã«ã™ã‚‹ã¨ã€çˆ†ç™ºçš„ã«ãƒ©ã‚¯ã«ãªã‚‹ã‚ˆğŸ’–

---

## åˆ†ã‘æ–¹ã®â€œé»„é‡‘3ã‚¹ãƒ†ãƒƒãƒ—â€ğŸ¥‡âœ¨

### â‘  ã¾ãšã€Œè¦‹ãŸç›®ã€ã ã‘ã«ã™ã‚‹ğŸ¨

* propsã§ã‚‚ã‚‰ã£ãŸã‚‚ã®ã ã‘è¡¨ç¤º
* `useState` ã‚„ `fetch` ã‚’ç½®ã‹ãªã„ï¼ˆç½®ããŸããªã£ã¦ã‚‚æˆ‘æ…¢ğŸ˜¤ï¼‰

### â‘¡ æ¬¡ã«ã€Œã¤ãªãå½¹ï¼ˆContainerï¼‰ã€ã‚’ä½œã‚‹ğŸ§©

* `useState` / `useEffect` / ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ã‚’æ›¸ã
* APIå‘¼ã³å‡ºã—ã‚„ã€çŠ¶æ…‹ã®æŒã¡æ–¹ã¯ã“ã“

### â‘¢ ãƒ­ã‚¸ãƒƒã‚¯ãŒå¢—ãˆãŸã‚‰ã€ŒHookã€ã«é€ƒãŒã™ğŸª„

* çŠ¶æ…‹ãƒ»å‡¦ç†ãƒ»å¤‰æ›ã‚’ `useXxx()` ã«ã¾ã¨ã‚ã‚‹
* ContainerãŒã‚¹ãƒƒã‚­ãƒªã—ã¦æ°—æŒã¡ã„ã„ğŸ¥¹âœ¨

---

## ãƒŸãƒ‹ä¾‹é¡Œï¼šã„ã„ã­â¤ï¸ãƒœã‚¿ãƒ³ã‚’â€œåˆ†ã‘ã¦â€ä½œã‚‹ã‚ˆï¼

### å®Œæˆã‚¤ãƒ¡ãƒ¼ã‚¸ğŸ˜Š

* ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ **ã„ã„ã­æ•°ãŒå¢—ãˆã‚‹**
* é€£æ‰“é˜²æ­¢ï¼ˆå‡¦ç†ä¸­ã¯æŠ¼ã›ãªã„ï¼‰ã‚‚å…¥ã‚Œã‚‹â³

---

## 1) è¦‹ãŸç›®æ‹…å½“ï¼š`LikeButton.tsx`ï¼ˆUIã ã‘ğŸ€ï¼‰

```tsx
// components/LikeButton.tsx
type Props = {
  count: number;
  disabled?: boolean;
  onLike: () => void;
};

export function LikeButton({ count, disabled = false, onLike }: Props) {
  return (
    <button
      type="button"
      onClick={onLike}
      disabled={disabled}
      style={{
        padding: "10px 14px",
        borderRadius: 12,
        border: "1px solid #ccc",
        background: disabled ? "#f3f3f3" : "white",
        cursor: disabled ? "not-allowed" : "pointer",
      }}
    >
      â¤ï¸ ã„ã„ã­ï¼ï¼ˆ{count}ï¼‰
      {disabled ? " â³" : ""}
    </button>
  );
}
```

âœ… ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ãˆã‚‰ã„æ‰€ğŸ‘

* çŠ¶æ…‹ã‚’æŒã£ã¦ãªã„
* `onLike` ã‚’æŠ¼ã•ã‚ŒãŸã‚‰å‘¼ã¶ã ã‘
* **è¦‹ãŸç›®ã®è²¬ä»»ã ã‘**ğŸ¨

---

## 2) ãƒ­ã‚¸ãƒƒã‚¯æ‹…å½“ï¼š`useLike.ts`ï¼ˆHookğŸª„ï¼‰

```tsx
// hooks/useLike.ts
"use client";

import { useState } from "react";

type Options = {
  initialCount?: number;
};

export function useLike(options: Options = {}) {
  const { initialCount = 0 } = options;

  const [count, setCount] = useState(initialCount);
  const [isLiking, setIsLiking] = useState(false);

  const like = async () => {
    if (isLiking) return;

    try {
      setIsLiking(true);

      // æœ¬å½“ã¯APIå‘¼ã³å‡ºã—ã™ã‚‹æƒ³å®šã§ã€ã¡ã‚‡ã„å¾…ã¤â³
      await new Promise((r) => setTimeout(r, 500));

      setCount((c) => c + 1);
    } finally {
      setIsLiking(false);
    }
  };

  return { count, isLiking, like };
}
```

âœ… Hookã«å…¥ã‚Œã‚‹ã¨è‰¯ã„ã‚‚ã®ğŸ§ 

* çŠ¶æ…‹ï¼ˆcount, isLikingï¼‰
* å‡¦ç†ï¼ˆlikeï¼‰
* â€œã¡ã‚‡ã„è¤‡é›‘â€ãªæµã‚Œï¼ˆé€£æ‰“é˜²æ­¢ãªã©ï¼‰

---

## 3) ã¤ãªãå½¹ï¼š`LikeSection.tsx`ï¼ˆContainerğŸ§©ï¼‰

```tsx
// components/LikeSection.tsx
"use client";

import { LikeButton } from "@/components/LikeButton";
import { useLike } from "@/hooks/useLike";

type Props = {
  initialCount?: number;
};

export function LikeSection({ initialCount = 0 }: Props) {
  const { count, isLiking, like } = useLike({ initialCount });

  return (
    <div style={{ display: "grid", gap: 10 }}>
      <p style={{ margin: 0 }}>ã“ã®æŠ•ç¨¿ã€ã‚ˆã‹ã£ãŸï¼ŸğŸ˜Š</p>
      <LikeButton count={count} disabled={isLiking} onLike={like} />
    </div>
  );
}
```

âœ… Containerã®å½¹å‰²ã¯ã€Œã¤ãªãã€ã ã‘ğŸ¤

* Hookã‹ã‚‰çŠ¶æ…‹ã¨é–¢æ•°ã‚’ã‚‚ã‚‰ã†
* UIã«propsã§æ¸¡ã™
  ãã‚Œã ã‘ï¼æ°—æŒã¡ã„ã„ï¼ğŸ¥¹âœ¨

---

## 4) ãƒšãƒ¼ã‚¸ã§ä½¿ã†ï¼š`app/page.tsx`ï¼ˆä¾‹ğŸ ï¼‰

```tsx
// app/page.tsx
import { LikeSection } from "@/components/LikeSection";

export default function Page() {
  return (
    <main style={{ padding: 24 }}>
      <h1 style={{ marginTop: 0 }}>ç¬¬42ç« ï¼šè¦‹ãŸç›®ã¨ãƒ­ã‚¸ãƒƒã‚¯åˆ†é›¢ğŸ’–</h1>
      <LikeSection initialCount={3} />
    </main>
  );
}
```

---

## ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆã®ãŠã™ã™ã‚ğŸ“âœ¨

```txt
src/
  app/
    page.tsx
  components/
    LikeButton.tsx       // è¦‹ãŸç›®ã ã‘ğŸ€
    LikeSection.tsx      // ã¤ãªãå½¹ğŸ§©
  hooks/
    useLike.ts           // ãƒ­ã‚¸ãƒƒã‚¯éƒ¨å“ğŸª„
```

---

## â€œåˆ†é›¢ã§ãã¦ã‚‹ã‹â€ã‚»ãƒ«ãƒ•ãƒã‚§ãƒƒã‚¯âœ…ğŸ§ 

UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆè¦‹ãŸç›®æ‹…å½“ï¼‰ãŒã“ã†ãªã£ã¦ãŸã‚‰æœ€é«˜ğŸ¥°

* `useState` ãŒãªã„ï¼ˆåŸºæœ¬ï¼‰ğŸš«
* `fetch` ãŒãªã„ï¼ˆåŸºæœ¬ï¼‰ğŸš«
* propsãŒåˆ†ã‹ã‚Šã‚„ã™ã„ï¼ˆ`count`, `onLike` ã¿ãŸã„ã«ï¼‰âœ¨
* ã€Œã“ã®è¦‹ãŸç›®ã€åˆ¥ã®å ´æ‰€ã§ã‚‚ä½¿ãˆãã†ã€ãŒå‡ºã¦ãã‚‹ğŸ§

é€†ã«Containerã¯â€¦

* çŠ¶æ…‹ãƒ»ã‚¤ãƒ™ãƒ³ãƒˆãƒ»é€šä¿¡ãŒã‚ã£ã¦OKğŸ™†â€â™€ï¸
* ã§ã‚‚JSXãŒãƒ‡ã‚«ããªã‚Šå§‹ã‚ãŸã‚‰ã€UIã¸åˆ†å‰²ã‚’æ¤œè¨âœ‚ï¸

---

## ã‚ˆãã‚ã‚‹å¤±æ•—ã‚ã‚‹ã‚ã‚‹ğŸ˜‡ï¼ˆå›é¿ã—ã‚ˆã£ï¼‰

### âŒ UIã«ãƒ­ã‚¸ãƒƒã‚¯ãŒæ¼ã‚Œã‚‹

ä¾‹ï¼š`LikeButton` ã®ä¸­ã§ `useState` ã—ã¯ã˜ã‚ã‚‹
â¡ï¸ **ã€Œè¦‹ãŸç›®ã ã‘ã€ãŒå´©ã‚Œã‚‹**ğŸ’¥

### âŒ ContainerãŒå·¨å¤§åŒ–ã™ã‚‹

JSXãŒ200è¡Œè¶…ãˆãŸâ€¦ğŸ˜µ
â¡ï¸ **è¦‹ãŸç›®ã‚’UIã«æˆ»ã—ã¦ã€Containerã¯â€œè–„ãâ€**âœ¨

### âŒ HookãŒä½•ã§ã‚‚å±‹ã«ãªã‚‹

`useApp()` ã¿ãŸã„ãªå·¨å¤§Hookâ€¦ğŸ˜‡
â¡ï¸ **ç›®çš„åˆ¥ã«å°ã•ã**ï¼ˆ`useLike`, `useProfile` ã¿ãŸã„ã«ï¼‰ğŸ§©

---

## ç·´ç¿’å•é¡Œï¼ˆ5ã€œ10åˆ†ï¼‰âŒ›ğŸ’ªâœ¨

### ãŠé¡ŒğŸ€

ã„ã¾ä½œã£ãŸ `LikeSection` ã«ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿½åŠ ã—ã¦ã¿ã‚ˆã†ï¼

* ã„ã„ã­ãŒ **10ä»¥ä¸Š**ãªã‚‰
  `ã€Œç¥ã™ãã‚‹ã€œã€œï¼ğŸ˜­âœ¨ã€` ã‚’è¡¨ç¤º
* ãã‚Œæœªæº€ãªã‚‰
  `ã€Œã‚ˆã‹ã£ãŸã‚‰æŠ¼ã—ã¦ã­ğŸ˜Šã€` ã‚’è¡¨ç¤º

ğŸ“Œãƒ«ãƒ¼ãƒ«ï¼š
**è¡¨ç¤ºã ã‘ã®if**ã¯UIå´ã«å¯„ã›ã¦ã‚‚OKï¼ˆè¦‹ãŸç›®ã ã‹ã‚‰ï¼‰âœ¨
ã§ã‚‚ã€æ¡ä»¶ãŒå¢—ãˆã¦è¨ˆç®—ãŒè¤‡é›‘ãªã‚‰ **Hookã«å¯„ã›ã‚‹**ã®ãŒâ—ğŸ§ 

ï¼ˆä¾‹ï¼š`const message = count >= 10 ? ...` ã‚’ã©ã“ã«ç½®ãã‹è€ƒãˆã‚‹ã®ãŒç·´ç¿’ã ã‚ˆã€œï¼ğŸª„ï¼‰

---

## ã¾ã¨ã‚ğŸ‰ğŸ’–

* **è¦‹ãŸç›®ï¼ˆUIï¼‰**ï¼špropsã§ã‚‚ã‚‰ã£ã¦æãã ã‘ğŸ¨
* **ã¤ãªãå½¹ï¼ˆContainerï¼‰**ï¼šçŠ¶æ…‹ãƒ»ã‚¤ãƒ™ãƒ³ãƒˆãƒ»é€šä¿¡ã‚’æ‹…å½“ğŸ§©
* **ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆHookï¼‰**ï¼šå¢—ãˆã¦ããŸã‚‰åˆ†é›¢ã—ã¦å†åˆ©ç”¨ğŸª„

ã“ã®å‹ãŒèº«ã«ã¤ãã¨ã€Next.jsã®é–‹ç™ºãŒä¸€æ°—ã«ãƒ©ã‚¯ã«ãªã‚‹ã‚ˆã€œï¼ğŸ¥¹âœ¨
