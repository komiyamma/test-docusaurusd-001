# ç¬¬33ç« ï¼šDynamic Routeï¼š`[id]` ã®åŸºæœ¬ğŸ§©

ã€ŒURLã®ä¸€éƒ¨ãŒæ¯å›å¤‰ã‚ã‚‹ãƒšãƒ¼ã‚¸ã€ã‚’ä½œã‚‹ã®ãŒ **Dynamic Routeï¼ˆå‹•çš„ãƒ«ãƒ¼ãƒˆï¼‰** ã ã‚ˆã€œğŸ˜Š
ãŸã¨ãˆã°ğŸ‘‡ã¿ãŸã„ãªã‚„ã¤ï¼

* `/students/1`
* `/students/2`
* `/students/999`

ã“ã® `1` ã‚„ `2` ã®éƒ¨åˆ†ã‚’ Next.js ã§ã¯ **`[id]`** ã£ã¦æ›¸ã„ã¦å—ã‘å–ã‚Œã‚‹ã‚ˆğŸ«¶

---

## 1) ã¾ãšã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ã¤ã‹ã‚‚ã†ğŸ‘€ğŸ—ºï¸

![Dynamic Route](./picture/next_study_033_dynamic_route.png)

Dynamic Route ã¯ **ãƒ•ã‚©ãƒ«ãƒ€åã«è§’ã‚«ãƒƒã‚³**ã‚’ä½¿ã†ã ã‘ï¼ã‹ã‚“ãŸã‚“âœ¨

```mermaid
flowchart LR
  A["/students"] --> B["/students/1"]
  A --> C["/students/2"]
  A --> D["/students/999"]

  B --> E["app/students/[#quot;id#quot;]/page.tsx ã§è¡¨ç¤º"]
  C --> E
  D --> E
```

---

## 2) ãƒ•ã‚©ãƒ«ãƒ€æ§‹æˆï¼š`[id]` ã‚’ä½œã‚‹ğŸ“ğŸ§©

ä»¥ä¸‹ã®ã‚ˆã†ã«ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œã‚‹ã‚ˆï¼ï¼ˆWindowsã§ã‚‚OKâœ¨ï¼‰

```text
app/
  students/
    page.tsx
    [id]/
      page.tsx
```

* `app/students/page.tsx` â†’ ä¸€è¦§ãƒšãƒ¼ã‚¸ï¼ˆä¾‹ï¼šå­¦ç”Ÿãƒªã‚¹ãƒˆï¼‰
* `app/students/[id]/page.tsx` â†’ è©³ç´°ãƒšãƒ¼ã‚¸ï¼ˆä¾‹ï¼šå­¦ç”Ÿã®è©³ç´°ï¼‰

---

## 3) ä¸€è¦§ãƒšãƒ¼ã‚¸ã‚’ä½œã‚‹ï¼š`/students` ğŸ§¾âœ¨

`app/students/page.tsx` ã‚’ä½œã£ã¦ã€è©³ç´°ãƒšãƒ¼ã‚¸ã¸ãƒªãƒ³ã‚¯ã—ã¦ã¿ã‚ˆã†ğŸ˜ŠğŸ”—

```tsx
import Link from "next/link";

const students = [
  { id: "1", name: "ã•ãã‚‰" },
  { id: "2", name: "ã‚ãŠã„" },
  { id: "3", name: "ã¿ãŠ" },
];

export default function StudentsPage() {
  return (
    <main style={{ padding: 16 }}>
      <h1>å­¦ç”Ÿä¸€è¦§ğŸŒ¸</h1>

      <ul style={{ lineHeight: 2 }}>
        {students.map((s) => (
          <li key={s.id}>
            <Link href={`/students/${s.id}`}>{s.name} ã•ã‚“ã®è©³ç´°ã¸â¡ï¸</Link>
          </li>
        ))}
      </ul>
    </main>
  );
}
```

ãƒã‚¤ãƒ³ãƒˆğŸ¥°

* ``<Link href={`/students/${s.id}`}>`` ã§ **å‹•çš„ãªURL**ã‚’ä½œã£ã¦ã‚‹ã‚ˆï¼

---

## 4) è©³ç´°ãƒšãƒ¼ã‚¸ã‚’ä½œã‚‹ï¼š`/students/1` ã¿ãŸã„ãªå ´æ‰€ğŸ”âœ¨

æ¬¡ã« `app/students/[id]/page.tsx` ã‚’ä½œã‚‹ã‚ˆï¼
ã“ã“ã§ã¯ URL ã® `id` ã‚’ **`params.id`** ã§å—ã‘å–ã‚Œã‚‹ã®ãŒãƒã‚¤ãƒ³ãƒˆğŸ§©

```tsx
type Props = {
  params: Promise<{ id: string }>;
};

export default async function StudentDetailPage({ params }: Props) {
  const { id } = await params;
  return (
    <main style={{ padding: 16 }}>
      <h1>å­¦ç”Ÿè©³ç´°ãƒšãƒ¼ã‚¸ğŸ“˜</h1>

      <p>
        ä»Šè¦‹ã¦ã„ã‚‹IDã¯â€¦ <b>{id}</b> ã ã‚ˆğŸ˜Šâœ¨
      </p>

      <p style={{ marginTop: 12 }}>
        ä¾‹ï¼šã“ã®IDã‚’ä½¿ã£ã¦ã€Œã“ã®äººã®ãƒ‡ãƒ¼ã‚¿ã€ã‚’å–ã‚Šã«è¡Œã‘ã‚‹ã‚ˆã†ã«ãªã‚‹ã‚ˆğŸ“¡
      </p>
    </main>
  );
}
```

---

## 5) å‹•ä½œãƒã‚§ãƒƒã‚¯ã—ã‚ˆã†âœ…ğŸš€

é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•ï¼ˆã‚‚ã†èµ·å‹•ä¸­ãªã‚‰ãã®ã¾ã¾ã§OKğŸ˜Šï¼‰

```bash
npm run dev
```

ãƒ–ãƒ©ã‚¦ã‚¶ã§è¦‹ã¦ã­ğŸ‘‡âœ¨

* `http://localhost:3000/students`
* ä¸€è¦§ã®ãƒªãƒ³ã‚¯ã‚’æŠ¼ã™ â†’ `/students/1` ã¨ã‹ã«ç§»å‹•ã§ãã‚Œã°æˆåŠŸğŸ‰

---

## 6) ã‚ˆãã‚ã‚‹ã¤ã¾ãšããƒã‚¤ãƒ³ãƒˆé›†ğŸ§¯ğŸ˜µâ€ğŸ’«

* **`[id]` ã‚’ãƒ•ã‚¡ã‚¤ãƒ«åã«ã—ã¦ã—ã¾ã£ãŸï¼**
  âœ… æ­£è§£ã¯ **ãƒ•ã‚©ãƒ«ãƒ€åãŒ `[id]`** ã ã‚ˆã€œï¼ˆ`[id]/page.tsx`ï¼‰ğŸ“

* **`params` ãŒ undefined ã£ã½ã„â€¦**
  âœ… App Router ã® `page.tsx` ãªã‚‰ `{ params }` ã‚’å—ã‘å–ã‚Œã‚‹ã‚ˆï¼
  ï¼ˆClient Componentã«ã™ã‚‹ã¨å—ã‘å–ã‚Šæ–¹ãŒå¤‰ã‚ã‚‹ã®ã§ã€ã¾ãšã¯ã“ã®å½¢ã§OKğŸ˜Šï¼‰

* **`/students?id=1` ã¨æ··ã–ã‚‹**
  âœ… ãã‚Œã¯ã€Œã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã€
  âœ… ä»Šå›ã¯ã€Œãƒ‘ã‚¹ã®ä¸€éƒ¨ã€ï¼š`/students/1` ã ã‚ˆğŸ›£ï¸âœ¨

---

## 7) ãƒŸãƒ‹ç·´ç¿’ğŸŒ¼ï¼ˆ5åˆ†ã§ã§ãã‚‹ï¼ï¼‰

ã‚„ã£ã¦ã¿ã¦ã­ğŸ˜Šâœï¸

1. `students` ã®é…åˆ—ã« `{ id: "4", name: "ã‚†ãª" }` ã‚’è¿½åŠ ã™ã‚‹
2. `/students/4` ã‚’é–‹ã„ã¦ `params.id` ãŒ `4` ã«ãªã‚‹ã‹ç¢ºèªã™ã‚‹
3. ä½™è£•ãŒã‚ã‚Œã°ã€è©³ç´°ãƒšãƒ¼ã‚¸ã®æ–‡ç« ã‚’ã€Œã€‡ã€‡ã•ã‚“ã®ãƒšãƒ¼ã‚¸ã§ã™ã€ã«ã—ã¦ã¿ã‚‹ğŸ’–

---

ã“ã“ã¾ã§ã§ããŸã‚‰ã€**ã€ŒURLã®å¤‰ã‚ã‚‹ãƒšãƒ¼ã‚¸ã€ã‚’ä½œã‚Œã‚‹ã‚ˆã†ã«ãªã£ãŸ**ã£ã¦ã“ã¨ã ã‚ˆã€œğŸ§©ğŸ‰
æ¬¡ã®ç« ï¼ˆç¬¬34ç« ï¼‰ã§ã€`params` ã‚’ã‚‚ã£ã¨TypeScriptã§å®‰å…¨ã«ã—ã¦ã„ãã¨æœ€å¼·ã«ãªã‚‹ã‚ˆğŸ˜âœ¨
