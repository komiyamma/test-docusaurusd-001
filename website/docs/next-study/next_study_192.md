# ç¬¬192ç« ï¼šãƒ•ã‚©ãƒ³ãƒˆæœ€é©åŒ–ã®è€ƒãˆæ–¹ï¼ˆèª­ã¿è¾¼ã¿ä½“é¨“ï¼‰ğŸ”¤

## ä»Šæ—¥ã®ã‚´ãƒ¼ãƒ«ğŸ¯

* Webãƒ•ã‚©ãƒ³ãƒˆãŒã€Œé…ã„ãƒ»ã‚¬ã‚¿ã¤ãã€åŸå› ã‚’ã–ã£ãã‚Šç†è§£ã™ã‚‹ğŸ˜Š
* Next.js ã® **`next/font`** ã§ã€**é€Ÿããƒ»ãã‚Œã„ã«**ãƒ•ã‚©ãƒ³ãƒˆã‚’èª­ã¿è¾¼ã‚ã‚‹ã‚ˆã†ã«ãªã‚‹ğŸŒˆ
* ã¤ã„ã§ã«ã€Œã¡ã‚‰ã¤ãï¼ˆFOIT/FOUTï¼‰ã€ã‚‚æ€–ããªããªã‚‹ğŸ’ªâœ¨

---

## ãªã‚“ã§ãƒ•ã‚©ãƒ³ãƒˆã£ã¦â€œä½“é¨“â€ã«åŠ¹ãã®ï¼ŸğŸ˜µâ€ğŸ’«ğŸŒ€

Webãƒ•ã‚©ãƒ³ãƒˆã¯ã€èª­ã¿è¾¼ã¿ãŒé…ã„ã¨â€¦

* æ–‡å­—ãŒä¸€ç¬ **æ¶ˆãˆã‚‹**ï¼ˆFOITï¼‰ğŸ˜¶â€ğŸŒ«ï¸
* å…ˆã«åˆ¥ãƒ•ã‚©ãƒ³ãƒˆã§å‡ºã¦ **ã‚ã¨ã§åˆ‡ã‚Šæ›¿ã‚ã£ã¦ã¡ã‚‰ã¤ã**ï¼ˆFOUTï¼‰ğŸ‘€ğŸ’¦
* æ–‡å­—å¹…ãŒå¤‰ã‚ã£ã¦ **ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãŒã‚¬ã‚¿ãƒƒ**ï¼ˆCLSã£ã½ã„ã‚„ã¤ï¼‰ğŸ“ğŸ˜«

ã¤ã¾ã‚Šã€Œæ–‡ç« ãŒä¸»å½¹ã®ç”»é¢ã€ã»ã©ã€ãƒ•ã‚©ãƒ³ãƒˆã®èª­ã¿è¾¼ã¿ã¯ä½“é¨“ã«ç›´æ’ƒã™ã‚‹ã‚ˆã€œğŸ“šâœ¨

---

## Next.js ãŒç”¨æ„ã—ã¦ãã‚Œã¦ã‚‹è§£æ±ºç­–ï¼š`next/font`ğŸª„

Next.js ã® **`next/font`** ã¯ãƒ•ã‚©ãƒ³ãƒˆã‚’è‡ªå‹•ã§æœ€é©åŒ–ã—ã¦ãã‚Œã¦ã€ã•ã‚‰ã« **å¤–éƒ¨ã¸ã®ãƒ•ã‚©ãƒ³ãƒˆå–å¾—ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æ¸›ã‚‰ã—ã¦**ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¨ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ã‚‚è‰¯ãã—ã¦ãã‚Œã‚‹ã‚ˆğŸ«¶âœ¨ ([Next.js][1])

ã—ã‹ã‚‚â€¦

* **Google Fonts ã‚’è‡ªå‹•ã§ã‚»ãƒ«ãƒ•ãƒ›ã‚¹ãƒˆ**ï¼ˆåŒã˜ãƒ‰ãƒ¡ã‚¤ãƒ³ã‹ã‚‰é…ä¿¡ï¼‰ã§ãã‚‹ğŸ’¡ ([Next.js][1])
* **ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚·ãƒ•ãƒˆã‚’æŠ‘ãˆã‚‹**è¨­è¨ˆã«ãªã£ã¦ã‚‹ğŸ“¦âœ¨ ([Next.js][1])

---

## å›³è§£ï¼šèª­ã¿è¾¼ã¿æ–¹ã§â€œè¦‹ãˆæ–¹â€ãŒå¤‰ã‚ã‚‹ã‚ˆâ³ğŸ‘€

![ãƒ•ã‚©ãƒ³ãƒˆèª­ã¿è¾¼ã¿ã®é€²åŒ–](./picture/next_study_192_font_opt.png)

```mermaid
flowchart TD
  A["ãƒšãƒ¼ã‚¸è¡¨ç¤ºã‚¹ã‚¿ãƒ¼ãƒˆ"] --> B["Webãƒ•ã‚©ãƒ³ãƒˆèª­ã¿è¾¼ã¿é–‹å§‹"]
  B --> C{"font-displayã¯ï¼Ÿ"}
  C -->|"blockç³»"| D["æ–‡å­—ãŒä¸€ç¬æ¶ˆãˆã‚‹ã‹ã‚‚ï¼ˆFOITï¼‰ğŸ˜¶â€ğŸŒ«ï¸"]
  C -->|"swapç³»"| E["ã¾ãšä»£æ›¿ãƒ•ã‚©ãƒ³ãƒˆã§è¡¨ç¤ºï¼ˆFOUTï¼‰ğŸ‘€"]
  D --> F["ãƒ•ã‚©ãƒ³ãƒˆåˆ°ç€ â†’ æœ¬ãƒ•ã‚©ãƒ³ãƒˆã§æç”»âœ¨"]
  E --> F
```

â€» `font-display` ã¯ã€ãƒ•ã‚©ãƒ³ãƒˆãŒæœªèª­è¾¼ã®é–“ã«ã€Œã©ã†è¡¨ç¤ºã™ã‚‹ã‹ã€ã‚’æ±ºã‚ã‚‹ä»•çµ„ã¿ã ã‚ˆğŸ“Œ ([MDNã‚¦ã‚§ãƒ–ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ][2])
ï¼ˆ`swap` ã ã¨ â€œã™ãè¡¨ç¤ºã—ã¦ã€ã‚ã¨ã§å·®ã—æ›¿ãˆâ€ ã®æ–¹å‘ã«ãªã‚Šã‚„ã™ã„ğŸ’¡ï¼‰ ([MDNã‚¦ã‚§ãƒ–ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ][2])

---

## å®Ÿè£…â‘ ï¼šGoogle Fonts ã‚’ `next/font/google` ã§å…¥ã‚Œã‚‹ï¼ˆã„ã¡ã°ã‚“å®šç•ªï¼‰ğŸ€

**ã‚„ã‚‹å ´æ‰€ï¼š`app/layout.tsx`ï¼ˆRoot Layoutï¼‰**
ã“ã“ã«å…¥ã‚Œã‚‹ã¨ã‚¢ãƒ—ãƒªå…¨ä½“ã«åŠ¹ãã‚ˆã€œğŸ âœ¨ ([Next.js][1])

```tsx
// app/layout.tsx
import type { Metadata } from "next";
import { Geist, Geist_Mono } from "next/font/google";
import "./globals.css";

const geistSans = Geist({
  subsets: ["latin"],
  display: "swap",
  variable: "--font-sans",
});

const geistMono = Geist_Mono({
  subsets: ["latin"],
  display: "swap",
  variable: "--font-mono",
});

export const metadata: Metadata = {
  title: "Font Demo",
};

export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <html lang="ja" className={`${geistSans.variable} ${geistMono.variable}`}>
      <body>{children}</body>
    </html>
  );
}
```

### âœ…ãƒã‚¤ãƒ³ãƒˆï¼ˆè¶…å¤§äº‹ï¼‰ğŸŒŸ

* `subsets` ã¯æŒ‡å®šã—ã¦ã­ï¼ï¼ˆãƒ—ãƒªãƒ­ãƒ¼ãƒ‰é–¢é€£ã®ã‚¨ãƒ©ãƒ¼å›é¿ã«ã‚‚ãªã‚‹ã‚ˆï¼‰ ([Next.js][3])
* `display: "swap"` ã¯ã€Œã¾ãšè¡¨ç¤ºã‚’å‡ºã™ã€å¯„ã‚Šã§ä½“é¨“ãŒè‰¯ããªã‚Šã‚„ã™ã„ğŸ’¡ï¼ˆè€ƒãˆæ–¹ã¨ã—ã¦ã­ï¼‰ ([MDNã‚¦ã‚§ãƒ–ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ][2])
* `variable` ã‚’ä½¿ã†ã¨ã€CSSã§æ‰±ã„ã‚„ã™ãã¦ä¾¿åˆ©ğŸ¨ ([Next.js][3])

---

## å®Ÿè£…â‘¡ï¼šCSSå´ã§ â€œã¡ã‚ƒã‚“ã¨é©ç”¨â€ ã™ã‚‹ï¼ˆvariable ã‚’ä½¿ã£ãŸå ´åˆï¼‰ğŸ§µâœ¨

`variable` ã¯ã€ŒCSSå¤‰æ•°ã‚’ç”Ÿã‚„ã™ã€ã ã‘ãªã®ã§ã€**font-family ã‚’å½“ã¦ã‚‹**ã®ã‚‚å¿˜ã‚Œãšã«ã­ğŸ˜‰
ï¼ˆNext.jsã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã‚‚ã“ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒç´¹ä»‹ã•ã‚Œã¦ã‚‹ã‚ˆï¼‰ ([Next.js][3])

```css
/* app/globals.css */
html {
  font-family: var(--font-sans);
}

code,
pre {
  font-family: var(--font-mono);
}
```

---

## å®Ÿè£…â‘¢ï¼šãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚©ãƒ³ãƒˆï¼ˆé…å¸ƒãƒ•ã‚©ãƒ³ãƒˆï¼‰ã‚’ä½¿ã†ã¨ãğŸ¡ğŸ“

ã€Œå­¦æ ¡ã®èª²é¡Œã§æŒ‡å®šãƒ•ã‚©ãƒ³ãƒˆä½¿ã„ãŸã„ï¼ã€ã¨ã‹ã€Œå•†ç”¨ãƒ•ã‚©ãƒ³ãƒˆå…¥ã‚ŒãŸã„ï¼ã€ã®ã¨ãã¯ã“ã‚ŒğŸ‘

### ä¾‹ï¼š`app/fonts/MyFont.woff2` ã‚’ç½®ã„ãŸå ´åˆ

```tsx
// app/layout.tsx
import localFont from "next/font/local";
import "./globals.css";

const myFont = localFont({
  src: "./fonts/MyFont.woff2",
  display: "swap",
  variable: "--font-sans",
});

export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <html lang="ja" className={myFont.variable}>
      <body>{children}</body>
    </html>
  );
}
```

`next/font/local` ã® `src` ã¯ã€Œå‘¼ã³å‡ºã—ã¦ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ã®ç›¸å¯¾ãƒ‘ã‚¹ã€ã§æŒ‡å®šã™ã‚‹ã‚ˆğŸ“Œ ([Next.js][3])

---

## ä½“é¨“ãŒã‚ˆããªã‚‹ â€œ4ã¤ã®ã‚³ãƒ„â€ ğŸ’–âœ¨

1. **ãƒ•ã‚©ãƒ³ãƒˆã¯å¢—ã‚„ã—ã™ããªã„**ï¼ˆåŸºæœ¬ã¯ 1ã€œ2å€‹ï¼‰ğŸ§¸
2. **ã‚¦ã‚§ã‚¤ãƒˆï¼ˆå¤ªã•ï¼‰ã‚’å¿…è¦æœ€å°é™ã«ã™ã‚‹**ï¼ˆ400/700ã ã‘ã€ã¨ã‹ï¼‰âœ‚ï¸
3. **`subsets` ã‚’å…¥ã‚Œã‚‹**ï¼ˆGoogle Fonts ã¯è‡ªå‹•ã§ã‚µãƒ–ã‚»ãƒƒãƒˆåŒ–ã•ã‚Œã¦è»½ããªã‚‹è€ƒãˆæ–¹ï¼‰ğŸª¶ ([Next.js][3])
4. **`display` ã‚’æ„è­˜ã™ã‚‹**ï¼ˆ`swap / optional` ãªã©ã€è¡¨ç¤ºæˆ¦ç•¥ã®é•ã„ãŒã‚ã‚‹ï¼‰ğŸ§  ([MDNã‚¦ã‚§ãƒ–ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ][2])

---

## ã‚ˆãã‚ã‚‹ãƒãƒã‚ŠğŸ˜‡â¡ï¸ğŸ˜µ & ç›´ã—æ–¹ğŸ§¯

### â‘ ã€Œsubsets æŒ‡å®šã—ã¦ãªãã¦æ€’ã‚‰ã‚ŒãŸï¼ã€ğŸ’¥

ã“ã†ã„ã†ç³»ã®ã‚¨ãƒ©ãƒ¼ã­ğŸ‘‡
**å¯¾å‡¦ï¼š`subsets: ["latin"]` ã¿ãŸã„ã«å…¥ã‚Œã‚‹**
ï¼ˆã‚‚ã—ãã¯ **ã©ã†ã—ã¦ã‚‚ç„¡ç†ãªã‚‰ `preload: false`**ï¼‰ ([Next.js][4])

### â‘¡ã€ŒGoogle Fonts ã®å–å¾—ã«å¤±æ•—ã—ãŸâ€¦ã€ğŸŒ§ï¸

ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚„ç’°å¢ƒã§å¤±æ•—ã™ã‚‹ã“ã¨ã‚‚ã‚ã‚‹ã‹ã‚‰ã€ãã†ã„ã†æ™‚ã¯

* ãƒ•ã‚©ãƒ³ãƒˆã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ **`next/font/local`** ã«åˆ‡ã‚Šæ›¿ãˆã‚‹
  ãŒå¼·ã„ã‚ˆğŸ’ªï¼ˆå®‰å®šã™ã‚‹âœ¨ï¼‰

---

## ãƒŸãƒ‹ç·´ç¿’ï¼ˆ5åˆ†ï¼‰â±ï¸ğŸ§¡

1. `next/font/google` ã§ãƒ•ã‚©ãƒ³ãƒˆã‚’1å€‹å…¥ã‚Œã‚‹ğŸ”¤
2. `display: "swap"` ã‚’ä»˜ã‘ã¦ã¿ã‚‹ğŸ”
3. ã‚¹ãƒãƒ›å›ç·šã£ã½ã„é€Ÿåº¦ï¼ˆChromeã®Networkã‚’Slowã«ï¼‰ã§è¦‹ã¦ã€**æ–‡å­—ãŒæ¶ˆãˆã‚‹/ã¡ã‚‰ã¤ã**ãŒæ¸›ã‚‹ã‹è¦³å¯ŸğŸ‘€âœ¨

---

## ã¾ã¨ã‚ğŸ

* ãƒ•ã‚©ãƒ³ãƒˆã¯ã€Œè¦‹ãŸç›®ã€ã ã‘ã˜ã‚ƒãªãã¦ **èª­ã¿è¾¼ã¿ä½“é¨“ãã®ã‚‚ã®**ã«åŠ¹ãğŸ“Œ
* Next.js ã¯ `next/font` ã§ **è‡ªå‹•æœ€é©åŒ– + ã‚»ãƒ«ãƒ•ãƒ›ã‚¹ãƒˆ**ãŒã§ãã‚‹ğŸª„ ([Next.js][1])
* `subsets` ã¨ `display` ã‚’æ„è­˜ã§ãã‚‹ã¨ã€ã‚‚ã†ä¸€æ®µãƒ—ãƒ­ã£ã½ã„ä»•ä¸ŠãŒã‚Šã«ãªã‚‹ã‚ˆã€œğŸ¥³ğŸ’–

[1]: https://nextjs.org/docs/app/getting-started/fonts "Getting Started: Font Optimization | Next.js"
[2]: https://developer.mozilla.org/en-US/docs/Web/CSS/Reference/At-rules/%40font-face/font-display "font-display - CSS | MDN"
[3]: https://nextjs.org/docs/pages/api-reference/components/font "Components: Font | Next.js"
[4]: https://nextjs.org/docs/messages/google-fonts-missing-subsets "Missing specified subset for a `next/font/google` font | Next.js"
