# ç¬¬132ç« ï¼šãªãœã€ŒãŸã ã®é–¢æ•°ã€ã˜ã‚ƒãƒ€ãƒ¡ãªã®ï¼ŸğŸ¤”ï¼ˆãƒ•ãƒƒã‚¯ã‚’ä½¿ã£ã¦ã‚‹ã‹ã‚‰ï¼ï¼‰

ã“ã®ç« ã®çµè«–ã ã‘å…ˆã«è¨€ã†ã­ğŸ‘‡
**ãƒ•ãƒƒã‚¯ï¼ˆ`useState` / `useEffect` ãªã©ï¼‰ã‚’ä½¿ã†é–¢æ•°ã¯ã€Reactã®â€œãƒ«ãƒ¼ãƒ«ã®ä¸­â€ã§å‹•ãå¿…è¦ãŒã‚ã‚‹**ã‹ã‚‰ã€ãŸã ã®é–¢æ•°ã«ã—ã¡ã‚ƒã†ã¨äº‹æ•…ã‚Šã‚„ã™ã„ã®ã§ã™ğŸ˜µâ€ğŸ’«ğŸ’¥
ã ã‹ã‚‰ã€Œ**ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯**ã€ã£ã¦å½¢ï¼ˆ`use`ã§å§‹ã¾ã‚‹é–¢æ•°ï¼‰ã«ã—ã¦ã€**å®‰å…¨ã«å†åˆ©ç”¨**ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã‚ˆã€œâœ¨

---

## 1) ã¾ãšå¤§äº‹ï¼šReactã¯ã€Œãƒ•ãƒƒã‚¯ã‚’å‘¼ã‚“ã é †ç•ªã€ã§è¦šãˆã¦ã‚‹ğŸ§ ğŸ“Œ

Reactã¯ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒæç”»ã•ã‚Œã‚‹ãŸã³ã«
ã€Œ1å€‹ç›®ã®ãƒ•ãƒƒã‚¯ã¯ã“ã‚Œã€ã€Œ2å€‹ç›®ã®ãƒ•ãƒƒã‚¯ã¯ã“ã‚Œã€ã£ã¦ **é †ç•ªã§çŠ¶æ…‹ã‚’ç®¡ç†**ã—ã¦ã‚‹ã‚ˆï¼

```mermaid
flowchart TD
  A[ãƒ¬ãƒ³ãƒ€ãƒ¼é–‹å§‹] --> B[1å€‹ç›®ã®ãƒ•ãƒƒã‚¯ã‚’å‘¼ã¶]
  B --> C[2å€‹ç›®ã®ãƒ•ãƒƒã‚¯ã‚’å‘¼ã¶]
  C --> D[3å€‹ç›®ã®ãƒ•ãƒƒã‚¯ã‚’å‘¼ã¶]
  D --> E[ReactãŒã€Œé †ç•ªã€ã§çŠ¶æ…‹ã‚’ã²ã‚‚ä»˜ã‘]
```

ã¤ã¾ã‚Šâ€¦
âœ… **æ¯å›åŒã˜é †ç•ªã§ãƒ•ãƒƒã‚¯ãŒå‘¼ã°ã‚Œã‚‹**ã“ã¨ãŒè¶…é‡è¦ï¼

---

## 2) ã€ŒãŸã ã®é–¢æ•°ã€ã«ã—ã¡ã‚ƒã†ã¨èµ·ããŒã¡ãªäº‹æ•…ğŸš‘ğŸ’¥

### âŒ äº‹æ•…ä¾‹ï¼šæ¡ä»¶åˆ†å²ã®ä¸­ã§ãƒ•ãƒƒã‚¯ã‚’å‘¼ã¶ï¼ˆé †ç•ªãŒã‚ºãƒ¬ã‚‹ï¼‰

```tsx
import { useState } from "react";

function helper(flag: boolean) {
  if (flag) {
    const [x] = useState(0); // âŒ ã“ã‚Œã€é †ç•ªãŒå¤‰ã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ï¼
    return x;
  }
  return 0;
}

export function App() {
  const a = helper(true);
  return <div>{a}</div>;
}
```

**ãªã«ãŒãƒ¤ãƒã„ã®ï¼ŸğŸ˜±**
`flag` ãŒå¤‰ã‚ã£ãŸç¬é–“ã« **å‘¼ã°ã‚Œã‚‹ãƒ•ãƒƒã‚¯ã®æ•°ãƒ»é †ç•ªãŒå¤‰ã‚ã‚‹** â†’ ReactãŒçŠ¶æ…‹ã‚’å–ã‚Šé•ãˆã‚‹å¯èƒ½æ€§ğŸ’¥

---

## 3) ã˜ã‚ƒã‚ã€Œã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã€ã£ã¦ä½•ãŒå‰ã„ã®ï¼ŸğŸŒŸ

ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã¯ä¸€è¨€ã§ã„ã†ã¨ğŸ‘‡
**â€œãƒ•ãƒƒã‚¯ã‚’å®‰å…¨ã«å†åˆ©ç”¨ã™ã‚‹ãŸã‚ã®ã€ãƒ«ãƒ¼ãƒ«ã«ä¹—ã£ãŸé–¢æ•°â€** ã ã‚ˆğŸ™Œâœ¨

### âœ… ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã«ã™ã‚‹ã¨å¾—ã™ã‚‹ã“ã¨

* **Reactã®ãƒ«ãƒ¼ãƒ«ï¼ˆåŒã˜é †ç•ªï¼‰ã‚’å®ˆã‚Šã‚„ã™ã„**ğŸ§·
* **ESLint ãŒã€Œãƒ•ãƒƒã‚¯ã®ãƒ«ãƒ¼ãƒ«é•åã€ã‚’æ¤œçŸ¥ã—ã¦ãã‚Œã‚‹**ğŸ”ï¼ˆè¶…å¤§äº‹ï¼ï¼‰
* **çŠ¶æ…‹ã‚’æŒã¤ãƒ­ã‚¸ãƒƒã‚¯ã‚’éƒ¨å“ã¿ãŸã„ã«ä½¿ã„å›ã›ã‚‹**ğŸ§©
* å‘½åãŒ `useã€‡ã€‡` ã ã¨ã€Œãƒ•ãƒƒã‚¯ã£ã½ã„ï¼ã€ã£ã¦ä¸€ç›®ã§ã‚ã‹ã‚‹ğŸ˜Š

---

## 4) ã“ã“ãŒãƒã‚¤ãƒ³ãƒˆï¼šå®Ÿã¯ã€Œã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã‚‚ãŸã ã®é–¢æ•°ã€ğŸ«¢âœ¨

ã¡ã‚‡ã£ã¨æ„å¤–ãªã‚“ã ã‘ã©ã€**ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯è‡ªä½“ã¯æ™®é€šã®é–¢æ•°**ã ã‚ˆã€‚
ã§ã‚‚é•ã„ã¯ã“ã“ğŸ‘‡

### âœ… é•ã„ã¯ã€Œãƒ«ãƒ¼ãƒ«ã«ä¹—ã£ã¦ã‚‹ã‹ã€ï¼†ã€Œè¦‹åˆ†ã‘ãŒã¤ãã‹ã€

* `use` ã§å§‹ã¾ã‚‹ â†’ **ãƒ•ãƒƒã‚¯ã ã¨åˆ†ã‹ã‚‹**
* ESLintãŒ **â€œã“ã“ã¯ãƒ•ãƒƒã‚¯ã‚’å‘¼ã‚“ã§OKãªå ´æ‰€â€** ã¨åˆ¤æ–­ã—ã‚„ã™ã„
* ãƒãƒ¼ãƒ é–‹ç™ºã§ã‚‚äº‹æ•…ã‚Šã«ãã„ğŸ‘¯â€â™€ï¸ğŸ’•

---

## 5) æ­£ã—ã„å½¢ï¼šã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã«ã—ã¦å®‰å…¨ã«ã™ã‚‹ğŸ§

### âœ… `useNumber`ï¼ˆä¾‹ï¼šæ•°ã‚’æŒã¤ã ã‘ã®ã‚·ãƒ³ãƒ—ãƒ«ãƒ•ãƒƒã‚¯ï¼‰

```tsx
import { useState } from "react";

export function useNumber(initialValue: number) {
  const [value, setValue] = useState(initialValue);

  const inc = () => setValue((v) => v + 1);
  const dec = () => setValue((v) => v - 1);

  return { value, inc, dec };
}
```

ä½¿ã†å´ï¼ˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼‰ã¯ã“ã†ğŸ‘‡

```tsx
import { useNumber } from "./useNumber";

export function App() {
  const { value, inc, dec } = useNumber(10);

  return (
    <div>
      <p>ã„ã¾ï¼š{value}</p>
      <button onClick={dec}>-1</button>
      <button onClick={inc}>+1</button>
    </div>
  );
}
```

ã“ã‚Œãªã‚‰
âœ… ãƒ•ãƒƒã‚¯ã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã§æ¯å›åŒã˜é †ç•ªã§å‘¼ã°ã‚Œã‚‹
âœ… ã—ã‹ã‚‚ãƒ­ã‚¸ãƒƒã‚¯ã‚’å†åˆ©ç”¨ã§ãã‚‹
æœ€é«˜ã€œã€œã€œï¼ğŸ‰ğŸ˜†

---

## 6) ã€Œãƒ•ãƒƒã‚¯ã®ãƒ«ãƒ¼ãƒ«ã€æœ€ä½é™ã“ã‚Œã ã‘è¦šãˆã‚ˆğŸ“šâœ¨

```mermaid
flowchart TB
  R[ãƒ•ãƒƒã‚¯ã®ãƒ«ãƒ¼ãƒ«] --> A[ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã§å‘¼ã¶]
  R --> B[æ¡ä»¶åˆ†å²ãƒ»ãƒ«ãƒ¼ãƒ—ãƒ»ãƒã‚¹ãƒˆé–¢æ•°ã®ä¸­ã§å‘¼ã°ãªã„]
  R --> C[Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ or ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã®ä¸­ã§å‘¼ã¶]
```

è¦šãˆæ–¹ï¼ˆã‚†ã‚‹ãï¼‰ğŸ‘‡

* **ãƒ•ãƒƒã‚¯ã¯æ¯å›åŒã˜é †ã§å‘¼ã¶**ğŸ§˜â€â™€ï¸
* **ãƒ•ãƒƒã‚¯ã¯â€œç‰¹åˆ¥ãªå ´æ‰€â€ã§ã ã‘å‘¼ã¶**ğŸ ï¼ˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ or `useã€‡ã€‡`ï¼‰

---

## 7) ãƒŸãƒ‹ç·´ç¿’ğŸ®ï¼š2ã¤ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§åŒã˜ãƒ­ã‚¸ãƒƒã‚¯ã‚’å…±æœ‰ã—ã‚ˆï¼

### ã‚„ã‚‹ã“ã¨ğŸ’ªâœ¨

* `useToggle` ã‚’ä½œã‚‹ï¼ˆON/OFFï¼‰
* 2ã¤ã®åˆ¥ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ä½¿ã†

`useToggle.ts`

```ts
import { useState } from "react";

export function useToggle(initial = false) {
  const [on, setOn] = useState(initial);
  const toggle = () => setOn((v) => !v);
  const setTrue = () => setOn(true);
  const setFalse = () => setOn(false);

  return { on, toggle, setTrue, setFalse };
}
```

`A.tsx`

```tsx
import { useToggle } from "./useToggle";

export function A() {
  const { on, toggle } = useToggle(false);

  return (
    <section>
      <h2>Aã¡ã‚ƒã‚“</h2>
      <p>{on ? "ON ğŸŒ" : "OFF ğŸŒ™"}</p>
      <button onClick={toggle}>åˆ‡ã‚Šæ›¿ãˆ</button>
    </section>
  );
}
```

`B.tsx`

```tsx
import { useToggle } from "./useToggle";

export function B() {
  const { on, setTrue, setFalse } = useToggle(true);

  return (
    <section>
      <h2>Bã¡ã‚ƒã‚“</h2>
      <p>{on ? "ON ğŸ”¥" : "OFF ğŸ§Š"}</p>
      <button onClick={setTrue}>ONã«ã™ã‚‹</button>
      <button onClick={setFalse}>OFFã«ã™ã‚‹</button>
    </section>
  );
}
```

`App.tsx`

```tsx
import { A } from "./A";
import { B } from "./B";

export function App() {
  return (
    <div>
      <A />
      <hr />
      <B />
    </div>
  );
}
```

ğŸ‰ ã§ããŸã‚‰å¤§æˆåŠŸï¼
ã€ŒåŒã˜ãƒ­ã‚¸ãƒƒã‚¯ã‚’2å›æ›¸ã‹ãšã«æ¸ˆã‚“ã ã€ï¼ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã®å‹ã¡ğŸ’–ğŸ˜†

---

## ã¾ã¨ã‚ğŸ§âœ¨

* Reactã¯ **ãƒ•ãƒƒã‚¯ã‚’å‘¼ã‚“ã é †ç•ª**ã§çŠ¶æ…‹ã‚’ç®¡ç†ã—ã¦ã‚‹ã‚ˆğŸ§ 
* ã ã‹ã‚‰ãƒ•ãƒƒã‚¯ã¯ **é †ç•ªãŒå¤‰ã‚ã‚‹å ´æ‰€ï¼ˆif/for/ãƒã‚¹ãƒˆï¼‰ã§å‘¼ã¶ã¨å±é™º**ğŸ’¥
* â€œãƒ•ãƒƒã‚¯ã‚’ä½¿ã†å†åˆ©ç”¨ãƒ­ã‚¸ãƒƒã‚¯â€ã¯ **ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ï¼ˆ`useã€‡ã€‡`ï¼‰** ã«ã™ã‚‹ã®ãŒå®‰å…¨ï¼†èª­ã¿ã‚„ã™ã„ğŸ€

æ¬¡ã®ç« ï¼ˆç¬¬133ç« ï¼‰ã§ã€Œåå‰ã¯ `use` ã§å§‹ã‚ã‚‹ã€ãƒ«ãƒ¼ãƒ«ã‚’ã‚‚ã£ã¨æ°—æŒã¡ã‚ˆãæ•´ç†ã—ã¦ã„ã“ã†ã€œï¼ğŸ˜Šâœ¨
